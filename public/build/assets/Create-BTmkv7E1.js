import{g as a,o as n,b as t,u as A,k as y,a as l,d as s,h as D,w as c,e as j,i as h,m,F as b,p as v,t as f,v as w,q as I,l as C,s as M}from"./app-e0MpasvE.js";import{_ as N}from"./AuthenticatedLayout-VDgioiGH.js";import{_ as U}from"./GlassContainer-8nFGHsFm.js";import{_ as q}from"./PrimaryButton-DL1WsPpg.js";import{_ as B}from"./SecondaryButton-Ch6W6awh.js";import{r as T}from"./XMarkIcon-DU6QvgYv.js";import{r as F}from"./PlusIcon-DCO7hwKp.js";import{r as R}from"./ExclamationTriangleIcon-DC9sDI2E.js";import"./ApplicationLogo-CSe1vILC.js";import"./UserGroupIcon-BRL2iVRY.js";function K(_,r){return n(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}const L={class:"flex items-center justify-between"},O={class:"space-y-6"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},z={class:"md:col-span-2"},Z={class:"relative"},G={class:"w-full min-h-[42px] px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus-within:ring-2 focus-within:ring-blue-400/50 focus-within:border-blue-400/50 transition-colors"},H={key:0,class:"flex flex-wrap gap-2 mb-2"},J=["onClick"],Q={class:"mt-1 flex items-center justify-between"},W={class:"text-xs text-blue-300"},X={key:0,class:"mt-1"},Y={class:"text-xs text-red-400"},ee=["value"],te={class:"flex items-center justify-between pt-6 border-t border-white/10"},re={key:0},se={key:1},ie={key:0,class:"rounded-lg bg-red-500/10 border border-red-500/20 p-4"},oe={class:"flex"},le={class:"ml-3"},ae={class:"mt-2 text-sm text-red-200"},ne={class:"list-disc space-y-1 pl-5"},ve={__name:"Create",props:{recipes:{type:Array,default:()=>[]}},setup(_){const r=A({tray_identifiers:[],recipe_id:"",location:"",notes:""}),d=y(""),u=y(""),g=y(null),$=i=>{const e=i.trim().toUpperCase();return e?e.length>10?{valid:!1,error:"Tray identifier cannot exceed 10 characters"}:/^[A-Z0-9]+$/.test(e)?r.tray_identifiers.includes(e)?{valid:!1,error:"Tray identifier already exists"}:{valid:!0,tag:e}:{valid:!1,error:"Tray identifier can only contain letters and numbers"}:{valid:!1,error:"Tray identifier cannot be empty"}},x=i=>{const e=$(i);return e.valid?(r.tray_identifiers.push(e.tag),d.value="",u.value="",!0):(u.value=e.error,!1)},E=()=>{d.value.trim()&&x(d.value)},k=i=>{r.tray_identifiers.splice(i,1),u.value="",M(()=>{g.value&&g.value.focus()})},S=i=>{u.value="",i.key==="Enter"||i.key===","||i.key===";"?(i.preventDefault(),d.value.trim()&&x(d.value)):i.key==="Backspace"&&!d.value&&r.tray_identifiers.length>0&&k(r.tray_identifiers.length-1)},V=()=>{if(u.value="",r.tray_identifiers.length===0){u.value="At least one tray identifier is required";return}r.post(route("crops.store"),{onSuccess:()=>{},onError:i=>{console.log("Form errors:",i)}})};return(i,e)=>(n(),a(b,null,[l(s(D),{title:"Create Crop Batch"}),l(N,null,{header:c(()=>[t("div",L,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-3xl font-bold text-white"},"Create New Crop Batch"),t("p",{class:"text-slate-300 mt-1"},"Start a new batch of microgreens with multiple trays")],-1)),l(s(C),{href:i.route("crops.index"),as:"button"},{default:c(()=>[l(B,{class:"flex items-center space-x-2"},{default:c(()=>[l(s(K),{class:"w-4 h-4"}),e[4]||(e[4]=t("span",null,"Back to Crops",-1))]),_:1})]),_:1},8,["href"])])]),default:c(()=>[t("div",O,[l(U,{variant:"default",padding:"large"},{default:c(()=>[t("form",{onSubmit:j(V,["prevent"]),class:"space-y-6"},[t("div",P,[t("div",z,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Tray Identifiers * ",-1)),t("div",Z,[t("div",G,[s(r).tray_identifiers.length>0?(n(),a("div",H,[(n(!0),a(b,null,v(s(r).tray_identifiers,(o,p)=>(n(),a("div",{key:p,class:"inline-flex items-center px-2 py-1 bg-blue-500/20 border border-blue-400/30 rounded-md text-sm text-blue-300"},[t("span",null,f(o),1),t("button",{type:"button",onClick:de=>k(p),class:"ml-1 text-blue-300 hover:text-white transition-colors","aria-label":"Remove tag"},[l(s(T),{class:"w-3 h-3"})],8,J)]))),128))])):h("",!0),m(t("input",{ref_key:"tagInput",ref:g,"onUpdate:modelValue":e[0]||(e[0]=o=>d.value=o),onKeydown:S,onBlur:E,type:"text",placeholder:"Enter tray ID (e.g., A1, B2, C3) and press Enter or comma",class:"w-full bg-transparent border-none outline-none text-white placeholder-gray-400 text-sm"},null,544),[[w,d.value]])])]),t("div",Q,[e[6]||(e[6]=t("p",{class:"text-xs text-gray-400"}," Enter unique identifiers for each tray. Press Enter or use comma to add multiple. ",-1)),t("p",W,f(s(r).tray_identifiers.length)+" tray"+f(s(r).tray_identifiers.length!==1?"s":""),1)]),u.value?(n(),a("div",X,[t("p",Y,f(u.value),1)])):h("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Recipe (Optional) ",-1)),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>s(r).recipe_id=o),class:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 transition-colors"},[e[8]||(e[8]=t("option",{value:""},"Select a recipe",-1)),(n(!0),a(b,null,v(_.recipes,o=>(n(),a("option",{key:o.id,value:o.id,class:"bg-gray-800"},f(o.name)+" ("+f(o.variety)+") ",9,ee))),128))],512),[[I,s(r).recipe_id]]),e[10]||(e[10]=t("p",{class:"text-xs text-gray-400 mt-1"},"Recipe will guide timing and growing parameters",-1))]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Base Location * ",-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s(r).location=o),type:"text",class:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 transition-colors",placeholder:"Soaking Station A",required:""},null,512),[[w,s(r).location]]),e[12]||(e[12]=t("p",{class:"text-xs text-gray-400 mt-1"},"Individual tray positions will be auto-generated",-1))])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-white mb-2"}," Batch Notes ",-1)),m(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>s(r).notes=o),rows:"3",class:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-400/50 focus:border-blue-400/50 transition-colors resize-none",placeholder:"Add any notes about this batch (seed lot, special conditions, etc.)"},null,512),[[w,s(r).notes]])]),t("div",te,[l(s(C),{href:i.route("crops.index"),as:"button"},{default:c(()=>[l(B,{class:"flex items-center space-x-2"},{default:c(()=>[l(s(T),{class:"w-4 h-4"}),e[14]||(e[14]=t("span",null,"Cancel",-1))]),_:1})]),_:1},8,["href"]),l(q,{type:"submit",disabled:s(r).processing,variant:"green",class:"flex items-center space-x-2"},{default:c(()=>[l(s(F),{class:"w-4 h-4"}),s(r).processing?(n(),a("span",re,"Creating...")):(n(),a("span",se,"Create Batch"))]),_:1},8,["disabled"])]),s(r).errors&&Object.keys(s(r).errors).length>0?(n(),a("div",ie,[t("div",oe,[l(s(R),{class:"h-5 w-5 text-red-400"}),t("div",le,[e[15]||(e[15]=t("h3",{class:"text-sm font-medium text-red-300"},"Please fix the following errors:",-1)),t("div",ae,[t("ul",ne,[(n(!0),a(b,null,v(s(r).errors,(o,p)=>(n(),a("li",{key:p},f(o),1))),128))])])])])])):h("",!0)],32)]),_:1})])]),_:1})],64))}};export{ve as default};
